<h1><%= @cocktail.name %></h1>

<h3>Doses :</h3>

<ul>
  <% @doses.each do |dose| %>
    <!-- la dose se crée quand même dans le formulaire même si on remplit pas tout et .persisted va filter cette dose -->
    <% if dose.persisted? %>
      <li>
        <%= Ingredient.find(dose.ingredient_id).name %> - <%= dose.description %>
        <%= link_to "delete", dose_path(dose),
        method: :delete,
        data: { confirm: "Are you sure?" } %>
      </li>
    <% end %>
  <% end %>
</ul>

<div class="container">

  <h3>Ajouter une dose</h3>

  <div class="row">
    <div class="col-xs-8 col-xs-offset-2">
      <%= simple_form_for [@cocktail, @dose] do |f| %>
        <%= f.input :ingredient_id, collection: Ingredient.all %>
        <%= f.input :description %>
        <%= f.submit class: 'btn btn-primary' %>
      <% end %>
    </div>
  </div>

</div>



